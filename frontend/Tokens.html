<!DOCTYPE html>
<html lang="ru" data-i18n-title="nav-tokens">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö—É–ø–∏—Ç—å –¢–æ–∫–µ–Ω—ã</title>
  <link rel="stylesheet" href="../static/css/style.css">
  <style>
    .container {
      flex: 1;
      max-width: 1200px;
      margin: 30px auto;
      padding: 2rem; /* Aligned with dashboard-container in style.css */
      overflow: hidden;
      text-align: center; /* Aligned with dashboard-container in style.css */
    }

    /* ============ Main Content ============ */
    .token-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Aligned with stats-grid in style.css */
      gap: 1rem; /* Aligned with stats-grid in style.css */
      justify-items: center;
      margin-bottom: 30px;
    }

    .token-card {
      flex: 1;
      max-width: 300px;
      padding: 1rem; /* Aligned with stat-card in style.css */
      border: 1px solid var(--fg); /* Use theme foreground for borders */
      border-radius: 0; /* Aligned with stat-card in style.css */
      text-align: left; /* Aligned with stat-card in style.css */
      background-color: var(--bg); /* Match body background */
    }

    .token-card h3 {
      margin-bottom: 0.2rem; /* Aligned with stat-card in style.css */
      font-size: 0.9rem; /* Aligned with stat-card in style.css */
      font-weight: bold; /* Aligned with stat-card in style.css */
    }

    .token-card p {
      font-size: 1rem; /* Aligned with stat-card in style.css */
      margin: 0;
      font-family: 'Courier New', monospace; /* Aligned with style.css */
    }

    .token-form {
      margin: 0 auto;
      max-width: 500px;
      padding: 1rem; /* Aligned with stat-card in style.css */
      border: 1px solid var(--fg); /* Use theme foreground for borders */
      border-radius: 0; /* Aligned with stat-card in style.css */
      background-color: var(--bg); /* Match body background */
    }

    .token-form label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      font-family: 'Courier New', monospace; /* Aligned with style.css */
    }

    .token-form input {
      width: 100%;
      padding: 8px;
      margin-bottom: 15px;
      border: 1px solid var(--fg); /* Use theme foreground for borders */
      border-radius: 0; /* Aligned with stat-card in style.css */
      background-color: var(--bg); /* Match body background */
      color: var(--fg);
      font-family: 'Courier New', monospace; /* Aligned with style.css */
    }

    .token-form input:focus {
      border-color: var(--fg);
      outline: none;
    }

    .token-form button {
      width: 100%;
      padding: 0.5rem 1rem; /* Aligned with btn-nav in style.css */
      font-size: 1rem; /* Aligned with btn-nav in style.css */
      color: var(--fg);
      background: none;
      border: none; /* Aligned with btn-nav in style.css */
      border: 1px solid var(--fg); /* Use theme foreground for borders */
      border-radius: 0; /* Aligned with stat-card in style.css */
      cursor: pointer;
      transition: background-color var(--transition-time), color var(--transition-time);
      font-family: 'Courier New', monospace; /* Aligned with style.css */
    }

    .token-form button:hover {
      text-decoration: underline; /* Aligned with btn-nav hover in style.css */
    }

    /* ============ Notification ============ */
    .notification {
      position: fixed;
      top: 60px;
      right: 20px;
      padding: 10px 20px;
      background-color: var(--status-green);
      color: #ffffff; /* White text for visibility on green background */
      border-radius: 0; /* Aligned with stat-card in style.css */
      display: none;
      z-index: 1000;
      font-family: 'Courier New', monospace; /* Aligned with style.css */
    }

    /* ============ Transaction Table ============ */
    .transaction-table {
      margin-top: 30px;
      width: 100%;
      border-collapse: collapse;
    }

    .transaction-table th,
    .transaction-table td {
      padding: 10px;
      border: 1px solid var(--fg); /* Use theme foreground for borders */
      text-align: left;
      font-family: 'Courier New', monospace; /* Aligned with style.css */
    }

    .transaction-table th {
      background-color: var(--bg);
      font-weight: 600;
    }

    .transaction-table td {
      background-color: var(--bg);
    }

    .transaction-controls {
      margin-top: 10px;
      text-align: right;
    }

    .btn-clear {
      padding: 0.5rem 1rem; /* Aligned with btn-nav in style.css */
      font-size: 1rem; /* Aligned with btn-nav in style.css */
      color: var(--fg);
      background: none;
      border: none; /* Aligned with btn-nav in style.css */
      border: 1px solid var(--fg); /* Use theme foreground for borders */
      border-radius: 0; /* Aligned with stat-card in style.css */
      cursor: pointer;
      transition: background-color var(--transition-time), color var(--transition-time);
      font-family: 'Courier New', monospace; /* Aligned with style.css */
    }

    .btn-clear:hover {
      text-decoration: underline; /* Aligned with btn-nav hover in style.css */
    }

    /* ============ Market Stats ============ */
    .market-stats {
      margin-top: 30px;
      padding: 1rem; /* Aligned with stat-card in style.css */
      border: 1px solid var(--fg); /* Use theme foreground for borders */
      border-radius: 0; /* Aligned with stat-card in style.css */
      background-color: var(--bg); /* Match body background */
      text-align: left; /* Aligned with stat-card in style.css */
    }

    .market-stats h3 {
      margin-bottom: 0.2rem; /* Aligned with stat-card in style.css */
      font-size: 0.9rem; /* Aligned with stat-card in style.css */
      font-weight: bold; /* Aligned with stat-card in style.css */
    }

    .market-stats p {
      margin: 5px 0;
      font-size: 1rem; /* Aligned with stat-card in style.css */
      font-family: 'Courier New', monospace; /* Aligned with style.css */
    }

    /* ============ Responsive Design ============ */
    @media (max-width: 768px) {
      .token-info {
        grid-template-columns: 1fr; /* Aligned with stats-grid in style.css */
      }
    }
  </style>
</head>
<body>
  <nav>
    <div class="nav-brand">
      <a href="index.html">BtcAIworK</a>
    </div>
    <div class="nav-links">
      <a href="index.html" class="btn-nav" data-i18n="nav-index">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="dashboard.html" class="btn-nav" data-i18n="nav-dashboard">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
      <a href="Tokens.html" class="btn-nav" data-i18n="nav-tokens">–ö—É–ø–∏—Ç—å —Ç–æ–∫–µ–Ω—ã</a>
      <a href="Login.html" class="btn-nav" data-i18n="nav-login">–í—Ö–æ–¥</a>
      <a href="Profile.html" class="btn-nav" data-i18n="nav-profile">–ê–∫–∫–∞—É–Ω—Ç</a>
      <a href="scripts.html" class="btn-nav" data-i18n="nav-scripts">–°–∫—Ä–∏–ø—Ç—ã</a>
      <a href="Connection.html" class="btn-nav" data-i18n="nav-connection">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
      <a href="Roadmap.html" class="btn-nav" data-i18n="nav-roadmap">–î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞</a>
      <button id="theme-toggle" class="btn-nav">üåô</button>
      <button id="lang-btn" class="btn-nav">RU</button>
    </div>
  </nav>

  <div id="notification" class="notification" data-i18n="notification-success">–¢–æ–∫–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ –∫—É–ø–ª–µ–Ω—ã!</div>

  <main class="container">
    <h2 data-i18n="main-title">–ö—É–ø–∏—Ç—å –¢–æ–∫–µ–Ω—ã</h2>
    <p data-i18n="main-description">–ü—Ä–∏–æ–±—Ä–µ—Ç–∞–π—Ç–µ —Ç–æ–∫–µ–Ω—ã BtcAIworK –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ –Ω–∞—à–µ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ.</p>

    <div class="token-info">
      <div class="token-card">
        <h3 data-i18n="token-price-title">–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞</h3>
        <p id="token-price" data-i18n="token-price-value">0.001 BTC –∑–∞ —Ç–æ–∫–µ–Ω</p>
      </div>
      <div class="token-card">
        <h3 data-i18n="token-available-title">–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤</h3>
        <p id="token-available">10,000,000</p>
      </div>
      <div class="token-card">
        <h3 data-i18n="token-balance-title">–í–∞—à–∏ —Ç–æ–∫–µ–Ω—ã</h3>
        <p id="token-balance">0</p>
      </div>
    </div>

    <div class="token-form">
      <form id="buy-form">
        <label for="wallet" data-i18n="label-wallet">–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞</label>
        <input type="text" id="wallet" required data-i18n-placeholder="wallet-placeholder">
        <label for="amount" data-i18n="label-amount">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤</label>
        <input type="number" id="amount" min="1" value="10" required>
        <button type="submit" class="btn-nav" data-i18n="btn-buy-tokens">–ö—É–ø–∏—Ç—å —Ç–æ–∫–µ–Ω—ã</button>
      </form>
    </div>

    <div class="market-stats">
      <h3 data-i18n="market-stats-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤</h3>
      <p><span data-i18n="total-sold-label">–í—Å–µ–≥–æ –ø—Ä–æ–¥–∞–Ω–æ:</span> <span id="total-sold">0</span></p>
      <p><span data-i18n="market-cap-label">–†—ã–Ω–æ—á–Ω–∞—è –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è:</span> <span id="market-cap">0 BTC</span></p>
    </div>

    <div class="transaction-history">
      <h3 data-i18n="transaction-title">–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h3>
      <table class="transaction-table">
        <thead>
          <tr>
            <th data-i18n="table-date">–î–∞—Ç–∞</th>
            <th data-i18n="table-wallet">–ö–æ—à–µ–ª–µ–∫</th>
            <th data-i18n="table-amount">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
            <th data-i18n="table-sum">–°—É–º–º–∞ (BTC)</th>
            <th data-i18n="table-status">–°—Ç–∞—Ç—É—Å</th>
          </tr>
        </thead>
        <tbody id="transaction-body">
          <!-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </tbody>
      </table>
      <div class="transaction-controls">
        <button id="clear-transactions" class="btn-clear" data-i18n="btn-clear-history">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
      </div>
    </div>
  </main>

  <footer>
    <p data-i18n="footer-text">¬© 2025 BtcAIworK. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
  </footer>

  <script type="module" src="../static/js/script.js"></script>
  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
    let availableTokens = 10000000;
    let userBalance = 0;
    let totalSold = 0;
    const tokenPrice = 0.001; // –¶–µ–Ω–∞ –∑–∞ —Ç–æ–∫–µ–Ω –≤ BTC

    // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
    const buyForm = document.getElementById('buy-form');
    const transactionBody = document.getElementById('transaction-body');
    const tokenAvailableEl = document.getElementById('token-available');
    const tokenBalanceEl = document.getElementById('token-balance');
    const totalSoldEl = document.getElementById('total-sold');
    const marketCapEl = document.getElementById('market-cap');
    const notificationEl = document.getElementById('notification');
    const clearTransactionsBtn = document.getElementById('clear-transactions');

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–∏—Å–µ–ª
    function formatNumber(num) {
      return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    function updateStats() {
      tokenAvailableEl.textContent = formatNumber(availableTokens);
      tokenBalanceEl.textContent = formatNumber(userBalance);
      totalSoldEl.textContent = formatNumber(totalSold);
      marketCapEl.textContent = (totalSold * tokenPrice).toFixed(4);
    }

    // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    function showNotification() {
      notificationEl.style.display = 'block';
      setTimeout(() => {
        notificationEl.style.display = 'none';
      }, 3000);
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ localStorage
    function loadTransactions() {
      const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
      transactions.forEach(tx => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${tx.date}</td>
          <td>${tx.wallet}</td>
          <td>${tx.amount}</td>
          <td>${tx.sum}</td>
          <td>${tx.status}</td>
        `;
        transactionBody.appendChild(row);
      });
      // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
      userBalance = parseInt(localStorage.getItem('userBalance')) || 0;
      totalSold = parseInt(localStorage.getItem('totalSold')) || 0;
      availableTokens = 10000000 - totalSold;
      updateStats();
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ localStorage
    function saveTransaction(tx) {
      const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
      transactions.unshift(tx);
      localStorage.setItem('transactions', JSON.stringify(transactions));
      localStorage.setItem('userBalance', userBalance);
      localStorage.setItem('totalSold', totalSold);
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–∫—É–ø–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤
    buyForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const wallet = document.getElementById('wallet').value;
      const amount = parseInt(document.getElementById('amount').value);

      if (amount > availableTokens) {
        alert(translations[localStorage.getItem('language') || 'ru']['alert-insufficient-tokens']);
        return;
      }

      const date = new Date().toLocaleString();
      const price = (amount * tokenPrice).toFixed(4);
      const lang = localStorage.getItem('language') || 'ru';
      const status = translations[lang]['status-completed'] || 'Completed';

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
      availableTokens -= amount;
      userBalance += amount;
      totalSold += amount;
      updateStats();

      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${date}</td>
        <td>${wallet}</td>
        <td>${amount}</td>
        <td>${price}</td>
        <td>${status}</td>
      `;
      transactionBody.prepend(row);

      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
      saveTransaction({ date, wallet, amount, sum: price, status });

      // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
      showNotification();

      // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
      buyForm.reset();
      document.getElementById('amount').value = 10;
    });

    // –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
    clearTransactionsBtn.addEventListener('click', () => {
      transactionBody.innerHTML = '';
      localStorage.removeItem('transactions');
      localStorage.removeItem('userBalance');
      localStorage.removeItem('totalSold');
      availableTokens = 10000000;
      userBalance = 0;
      totalSold = 0;
      updateStats();
    });

    // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', loadTransactions);
  </script>
</body>
</html>